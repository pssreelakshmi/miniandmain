<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    {% load static %}
    <!-- Favicon -->
    <title>Payment Detail</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="{% static 'img/favicon.ico' %}" rel="icon">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
  
    <link href="{% static 'img/favicon.ico' %}" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500&family=Lora:wght@600;700&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
   <!-- Link to the external CSS file -->
</head>
<style>
    :root {
        --primary-color: #4a90e2;
        --secondary-color: #2c3e50;
        --background-color: #f4f7f9;
        --text-color: #333;
        --border-color: #e0e0e0;
        --success-color: #27ae60;
        --warning-color: #f39c12;
        --danger-color: #e74c3c;
    }

    body {
        font-family: 'Roboto', sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 0;
        background-color: var(--background-color);
        color: var(--text-color);
    }

    .container {
        max-width: 1000px;
        margin: 40px auto;
        padding: 0 20px;
    }

    h1 {
        color: var(--secondary-color);
        text-align: center;
        margin-bottom: 30px;
        font-size: 2.5em;
        font-weight: 300;
        text-transform: uppercase;
        letter-spacing: 2px;
    }

    .payment-detail {
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        overflow: hidden;
    }

    .header {
        background-color: var(--primary-color);
        color: #fff;
        padding: 30px;
        text-align: center;
        position: relative;
    }

    .header h2 {
        margin: 0;
        font-size: 2em;
        font-weight: 500;
    }

    .content {
        padding: 40px;
    }

    .section {
        margin-bottom: 40px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        padding: 25px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .section:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
    }

    .section h3 {
        color: var(--secondary-color);
        border-bottom: 2px solid var(--border-color);
        padding-bottom: 10px;
        margin-bottom: 20px;
        font-weight: 500;
    }

    .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
    }

    .info-item {
        background-color: #f9f9f9;
        border-radius: 4px;
        padding: 15px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        transition: transform 0.3s ease;
    }

    .info-item:hover {
        transform: translateY(-3px);
    }

    .info-item strong {
        display: block;
        margin-bottom: 5px;
        color: var(--secondary-color);
        font-size: 0.9em;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .info-item span {
        font-size: 1.1em;
        font-weight: 500;
    }

    .status {
        display: inline-block;
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.9em;
        font-weight: bold;
        text-transform: uppercase;
    }

    .status-paid {
        background-color: var(--success-color);
        color: #fff;
    }

    .status-pending {
        background-color: var(--warning-color);
        color: #fff;
    }

    .progress-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 20px 0;
        position: relative;
    }

    .progress-step {
        text-align: center;
        position: relative;
        flex: 1;
    }

    .progress-step:not(:last-child)::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 100%;
        width: 100%;
        height: 4px;
        background-color: var(--border-color);
        z-index: -1;
    }

    .progress-step.active {
        color: var(--primary-color);
        font-weight: bold;
    }

    .progress-step.completed {
        color: var(--success-color);
    }

    .progress-icon {
        width: 30px;
        height: 30px;
        margin: 0 auto 10px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: var(--border-color);
        color: #fff;
        font-weight: bold;
    }

    .progress-icon.completed {
        background-color: var(--success-color);
    }

    .button {
        display: inline-block;
        padding: 12px 24px;
        background-color: var(--primary-color);
        color: #fff;
        text-decoration: none;
        border-radius: 4px;
        transition: all 0.3s ease;
        font-weight: bold;
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 1px;
        box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);
    }

    .button:hover {
        background-color: #3a7bc8;
        transform: translateY(-1px);
        box-shadow: 0 7px 14px rgba(50, 50, 93, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);
    }

    .button:active {
        transform: translateY(1px);
    }

    .cart-container {
        padding: 40px;
        background-color: #ffffff;
        border-radius: 12px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        margin-top: 80px;
        border: 1px solid #e0e0e0;
    }

    .cart-container h1 {
        font-size: 2rem;
        margin-bottom: 20px;
        color: #007bff;
        border-bottom: 2px solid #007bff;
        padding-bottom: 10px;
    }

    .cart-item {
        display: flex;
        align-items: center;
        padding: 15px;
        border-bottom: 1px solid #e0e0e0;
        background-color: #f9f9f9;
        border-radius: 8px;
        margin-bottom: 15px;
        transition: background-color 0.3s, box-shadow 0.3s;
    }

    .cart-item:hover {
        background-color: #f1f1f1;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .cart-item img {
        width: 120px;
        height: 120px;
        object-fit: cover;
        border-radius: 8px;
        margin-right: 20px;
        border: 1px solid #e0e0e0;
    }

    .cart-item div {
        flex: 1;
    }

    .cart-item h4 {
        margin: 0;
        font-size: 1.5rem;
        color: #343a40;
    }

    .cart-item p {
        margin: 5px 0;
        color: #6c757d;
    }

    .cart-item span {
        font-weight: bold;
        color: #007bff;
    }

    .cart-item input {
        width: 50px;
        padding: 5px;
        font-size: 1rem;
        border: 1px solid #e0e0e0;
        border-radius: 4px;
        text-align: center;
        margin-top: 10px;
    }

    .cart-item .remove-button {
        background-color: #dc3545;
        color: #ffffff;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s;
        font-size: 1rem;
        margin-left: 20px;
    }

    .cart-item .remove-button:hover {
        background-color: #c82333;
    }

    .total-price {
        font-size: 1.8rem;
        font-weight: bold;
        text-align: right;
        color: #28a745;
    }

    .checkout-button {
        display: block;
        width: 100%;
        padding: 15px 0;
        background-color: #007bff;
        color: #ffffff;
        text-align: center;
        border: none;
        border-radius: 8px;
        font-size: 1.5rem;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.3s;
        margin-top: 30px;
    }

    .checkout-button:hover {
        background-color: #0056b3;
    }

    .info-text {
        text-align: center;
        margin-top: 50px;
        color: #6c757d;
        font-size: 1.2rem;
        font-style: italic;
    }
    .section {
padding: 20px;
}

.progress-container {
display: flex;
justify-content: space-between;
align-items: center;
margin: 20px 0;
}

.progress-step {
width: 30%;
text-align: center;
position: relative;
}

.progress-step:before {
content: '';
position: absolute;
top: 15px;
left: 50%;
width: 100%;
height: 3px;
background-color: #e0e0e0;
z-index: -1;
transform: translateX(-50%);
}

.progress-step:first-child:before {
content: none;
}

.progress-icon {
width: 30px;
height: 30px;
border-radius: 50%;
background-color: #e0e0e0;
display: inline-block;
line-height: 30px;
color: #333;
}

.completed .progress-icon {
background-color: green;
color: #fff;
}

.completed:before {
background-color: green;
}
.button {
        padding: 10px 20px;
        font-size: 16px;
        border: none;
        cursor: pointer;
        border-radius: 5px;
        text-align: center;
        margin: 10px 0;
    }
    .continue-shopping-button {
        background-color: #4CAF50; /* Green background */
        color: white;              /* White text */
        border: 2px solid #4CAF50; /* Border matching the background */
    }
    .continue-shopping-button {
background-color: #bdbf3a;
color: white;
border: 2px solid #9ea74f;
}
.text-success {
color: green; /* Green color for 'DELIVERED' */
}

.text-warning {
color: yellow; /* Yellow color for 'PENDING' */
}

.text-muted {
color: rgb(48, 34, 34); /* Default gray color for other statuses */
}
.card {
    border-radius: 15px;
    border: none;
}

.card-header {
    border-radius: 15px 15px 0 0;
}

.card-body h5, .card-body h6 {
    margin-bottom: 10px;
}

.card-body hr {
    border-top: 1px solid #ddd;
}

.img-fluid {
    padding: 10px;
}
.text-primary {
    color: #637b5c !important;
}
.btn-primary {
    background-color: #007bff;
    border: none;
    transition: background-color 0.3s;
}

.btn-primary:hover {
    background-color: #0056b3;
}

.btn-secondary {
    border: none;
    background-color: #6c757d;
}

.btn-secondary:hover {
    background-color: #5a6268;
}

.star-rating {
    direction: rtl;
    display: inline-block;
}

.star-rating input {
    display: none;
}

.star-rating label {
    font-size: 30px;
    color: #ddd;
    cursor: pointer;
}

.star-rating input:checked ~ label {
    color: #f39c12; /* Color for selected stars */
}

.star-rating label:hover,
.star-rating label:hover ~ label {
    color: #f39c12; /* Color for hovered stars */
}

</style>

<body>
    <div class="container-fluid fixed-top px-0 wow fadeIn" data-wow-delay="0.1s">
        <div class="top-bar row gx-0 align-items-center d-none d-lg-flex">
            <div class="col-lg-6 px-5 text-start">
               
                <small class="ms-4"><i class="fa fa-envelope me-2"></i>grocery18900@gmail.com</small>
            </div>
            <div class="col-lg-6 px-5 text-end">
                <small>Follow us:</small>
                <a class="text-body ms-3" href=""><i class="fab fa-facebook-f"></i></a>
                <a class="text-body ms-3" href=""><i class="fab fa-twitter"></i></a>
                <a class="text-body ms-3" href=""><i class="fab fa-linkedin-in"></i></a>
                <a class="text-body ms-3" href=""><i class="fab fa-instagram"></i></a>
            </div>
        </div>

        <nav class="navbar navbar-expand-lg navbar-light py-lg-0 px-lg-5 wow fadeIn" data-wow-delay="0.1s">
            <a href="index.html" class="navbar-brand ms-4 ms-lg-0">
                <!-- Navbar Brand Logo Here -->
            </a>
            <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav ms-auto p-4 p-lg-0">
                    <a href="{% url 'customer_dashboard' %}"   class="nav-item nav-link active">Home</a>
                    <a href="#" class="nav-item nav-link">About Us</a>
                    <a href="{% url 'list_category_products' %}" class="nav-item nav-link">Products</a>
                    
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Pages</a>
                        <div class="dropdown-menu m-0">
                            <a href="#" class="dropdown-item">Blog Grid</a>
                            <a href="#" class="dropdown-item">Our Features</a>
                            <a href="{% url 'price_chart_customer' %}" class="dropdown-item">View Price Charts</a>
                            
                        </div>
                    </div>
                    <a href="{% url 'contact' %}"  class="nav-item nav-link">Contact Us</a>
                    <!--<a href="{% url 'price_chart_customer' %}" class="nav-item nav-link">View Price Charts</a>-->
                </div>
                    <a class="btn-sm-square bg-white rounded-circle ms-3" href="">
                        <small class="fa fa-shopping-bag text-body"></small>
                    </a>
                </div>
            </div>
        </nav><br><br><br>
        <div class="main-content">
            <div class="container mt-5">
                <div class="card shadow-lg p-4">
                    <!--<div class="card-header bg-primary text-white text-center">
                        <h3>Order Details</h3>
                    </div>-->
                    <div class="card-body">
                        <!-- Display Order ID, Amount Paid, Date, and Status with larger font size -->
                        <div class="row">
                            <div class="col-md-12">
                                <h6 class="font-weight-bold">Order ID: <span class="text-primary">{{ payment.order_id }}</span></h6>
                                <h6>Amount Paid: <span class="text-success font-weight-bold">Rs {{ payment.amount_paid }}</span></h6>
                                <h6>Date: <span class="text-muted">{{ payment.created_at|date:"F d, Y H:i" }}</span></h6>
                                <h6>Status: 
                                    <span class="badge 
                                        {% if payment.order_details.order_status == 'Delivered' %}
                                            badge-success
                                        {% elif payment.order_details.order_status == 'Pending' %}
                                            badge-warning
                                        {% else %}
                                            badge-danger
                                        {% endif %}
                                    ">
                                        {{ payment.order_details.order_status }}
                                    </span>
                                </h6>
                            </div>
                        </div>
                        <hr>
        
                        <!-- Loop through each product in the order and display in boxed style -->
                        <h6 class="mt-4">Products</h6>
                        <div class="row">
                            {% for order_product in payment.order_details.orderproduct_set.all %}
                            <div class="col-md-4 mb-4">
                                <div class="card shadow-sm border">
                                    <div class="card-body text-center">
                                        <!-- Product Image -->
                                        <img src="{{ order_product.product.image.url }}" alt="Product Image" class="img-fluid rounded border mb-3" style="max-width: 150px; max-height: 150px;">
                                        
                                        <!-- Product Details -->
                                        <h6 class="font-weight-bold">Product: {{ order_product.product.product_name }}</h6>
                                        <h6>Quantity: {{ order_product.quantity }}</h6>
                                        <!--<h6>Price per Item: Rs {{ order_product.product.price }}</h6>-->
                                      
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        <hr>
        
                        <!-- Customer Information -->
                        <h6 class="mt-4">Customer Information</h6>
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Name: <span class="text-dark">{{ payment.user.name }}</span></h6>
                                <h6>Email: <span class="text-dark">{{ payment.user.email }}</span></h6>
                            </div>
                            <div class="col-md-6">
                                <h6>Phone: <span class="text-dark">{{ payment.user.phone }}</span></h6>
                                <h6>Address: <span class="text-dark">{{ payment.user.address }}</span></h6>
                            </div>
                        </div>

                        <!-- Feedback and Rating Section -->
                        {% if payment.status == 'Delivered' %}
                        <h4 class="mt-4">Feedback and Rating</h4>
                        <form method="POST" action="{% url 'submit_feedback_rating' payment.id %}">
                            {% csrf_token %}
                            <div class="form-group">
                                <label for="feedback">Your Feedback:</label>
                                <textarea id="feedback" name="feedback" class="form-control" rows="3" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="rating">Your Rating:</label>
                                <div class="star-rating">
                                    <input type="radio" id="star5" name="rating" value="5" required />
                                    <label for="star5" class="star">&#9733;</label>
                                    <input type="radio" id="star4" name="rating" value="4" />
                                    <label for="star4" class="star">&#9733;</label>
                                    <input type="radio" id="star3" name="rating" value="3" />
                                    <label for="star3" class="star">&#9733;</label>
                                    <input type="radio" id="star2" name="rating" value="2" />
                                    <label for="star2" class="star">&#9733;</label>
                                    <input type="radio" id="star1" name="rating" value="1" />
                                    <label for="star1" class="star">&#9733;</label>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">Submit Feedback and Rating</button>
                        </form>
                        
                        {% endif %}
                    </div>
                    
                    <!-- Card Footer -->
                    <div class="card-footer text-center">
                        <a href="#" class="btn btn-primary btn-sm" id="generate-pdf">Generate Receipt PDF</a>
                        <a href="{% url 'payment_list' %}" class="btn btn-secondary btn-sm">Back to Payment List</a>
                    </div>
                </div>
            </div>
        </div>
        

  <!--  <div class="footer">
        <p>&copy; 2023 Payment Service. All rights reserved.</p>
    </div>-->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        document.getElementById('generate-pdf').addEventListener('click', function() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Header Section with Background Color
            doc.setFillColor(74, 144, 226); // Primary color
            doc.rect(0, 0, 210, 30, 'F'); // Header background
            doc.setFontSize(18);
            doc.setTextColor(255, 255, 255); // White text
            doc.text('Order Receipt', 15, 20);

            // Order Details Section
            doc.setTextColor(0, 0, 0); // Black text for content
            doc.setFontSize(12);
            doc.text('Order Details', 15, 40);

            // Draw a line under the section title
            doc.setDrawColor(0, 0, 0); // Black line
            doc.line(15, 42, 195, 42); // Horizontal line

            // Order Details Content
            doc.setFontSize(11);
            doc.text('Order ID: {{ payment.order_id }}', 15, 50);
            doc.text('Amount Paid: Rs{{ payment.amount_paid }}', 15, 58);
            doc.text('Date: {{ payment.created_at|date:"F d, Y H:i" }}', 15, 66);
            doc.text('Status: {{ payment.status }}', 15, 74);

            // Customer Details Section
            doc.setFontSize(12);
            doc.setTextColor(74, 144, 226); // Primary color for section headers
            doc.text('Customer Details', 15, 90);

            // Draw a line under the section title
            doc.setDrawColor(0, 0, 0); // Black line
            doc.line(15, 92, 195, 92); // Horizontal line

            // Customer Details Content
            doc.setFontSize(11);
            doc.setTextColor(0, 0, 0); // Black text for content
            doc.text('Name: {{ payment.user.name }}', 15, 100);
            doc.text('Email: {{ payment.user.email }}', 15, 108);
            doc.text('Phone: {{ payment.user.phone }}', 15, 116);
            doc.text('Address: {{ payment.user.address }}', 15, 124);
            doc.text('Pincode: {{ payment.user.pincode }}', 15, 132);

            // Product Details Section
            doc.setFontSize(12);
            doc.setTextColor(74, 144, 226); // Primary color for section headers
            doc.text('Product Details', 15, 150);

            // Draw a line under the section title
            doc.setDrawColor(0, 0, 0); // Black line
            doc.line(15, 152, 195, 152); // Horizontal line

            // Product Details Content
            doc.setFontSize(11);
            doc.setTextColor(0, 0, 0); // Black text for content
            doc.text('Product Name: {{ payment.order_details.product.product_name }}', 15, 160);
            doc.text('Total Amount: {{ payment.amount_paid }} Kg', 15, 168);

            // Footer Section with Background Color
            doc.setFillColor(74, 144, 226); // Primary color
            doc.rect(0, 270, 210, 30, 'F'); // Footer background
            doc.setTextColor(255, 255, 255); // White text
            doc.setFontSize(10);
            doc.text('Thank you for your purchase!', 15, 285);

            doc.save('receipt.pdf');
        });
    </script>
</body>

</html>